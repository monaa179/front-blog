import{x as B,k as D,y as R,c as r,a as e,p as s,z as h,t as V,F as S,A as z,b as L,o as n,w as $,l as M,D as T,s as p,_ as F}from"./C_A17Xze.js";import{u as I}from"./pLjy45M9.js";import{L as N}from"./CG3JdVlk.js";import{A as q}from"./BdB3I3wt.js";import{C as E}from"./Ckzw1s2j.js";import"./BJCqP2a2.js";import"./CXg0sqL6.js";import"./pMK9VmZY.js";import"./Cl4ISXQJ.js";const O={class:"dashboard-page"},P={key:1,class:"error-msg glass-panel"},G={key:2,class:"content-container"},H={key:0,class:"table-card glass-panel"},J={class:"modern-table"},K=["onClick"],Q=["onClick"],U={key:1,class:"empty-state glass-panel"},W=B({__name:"dashboard",setup(X){const g=D(),{articles:b,loading:y,error:v,fetch:u,updateStatus:k,archiveArticle:w,deleteArticle:C}=I({statuses:["proposed"],order:{column:"created_at",ascending:!1}}),m=T(()=>b.value.filter(o=>o.status==="proposed")),x=async o=>{await k(o,"validated")},d=p(!1),i=p(null),a=p(!1),A=o=>{i.value=o,d.value=!0},c=()=>{d.value=!1,i.value=null,a.value=!1},_=async()=>{if(!i.value)return;a.value=!0,await w(i.value)?c():a.value=!1},j=async()=>{if(!i.value)return;a.value=!0,await C(i.value)?c():a.value=!1};return R(()=>{u()}),(o,t)=>(n(),r("div",O,[t[7]||(t[7]=e("header",{class:"page-header"},[e("div",{class:"header-text"},[e("h1",null,"Validation"),e("p",{class:"subtitle"},"Passez en revue et validez les nouveaux sujets d'articles.")])],-1)),s(y)?(n(),h(N,{key:0,message:"Chargement des propositions..."})):s(v)?(n(),r("div",P,[t[2]||(t[2]=e("div",{class:"error-icon"},"⚠️",-1)),e("p",null,V(s(v)),1),e("button",{class:"btn btn-outline btn-sm mt-4",onClick:t[0]||(t[0]=(...l)=>s(u)&&s(u)(...l))},"Réessayer")])):(n(),r("div",G,[s(m).length>0?(n(),r("div",H,[e("table",J,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",{style:{width:"35%"}},"Sujet"),e("th",{style:{width:"45%"}},"Description"),e("th",{style:{width:"100px"}},"Date"),e("th",{style:{"text-align":"right"}},"Actions")])],-1)),e("tbody",null,[(n(!0),r(S,null,z(s(m),l=>(n(),h(q,{key:l.id,article:l,onClick:f=>s(g).push(`/articles/${l.id}`)},{actions:$(()=>[e("div",{class:"action-group",onClick:t[1]||(t[1]=M(()=>{},["stop"]))},[e("button",{class:"btn btn-primary btn-sm btn-icon-label",onClick:f=>x(l.id),title:"Valider"},[...t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),e("span",null,"Valider",-1)])],8,K),e("button",{class:"btn btn-ghost btn-sm btn-square text-danger",onClick:f=>A(l.id),title:"Refuser"},[...t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Q)])]),_:2},1032,["article","onClick"]))),128))])])])):(n(),r("div",U,[...t[6]||(t[6]=[e("div",{class:"empty-illustration"},"☕",-1),e("h3",null,"Tout est en ordre",-1),e("p",null,"Aucun nouveau sujet en attente de validation pour le moment.",-1)])]))])),L(E,{"is-open":s(d),title:"Refuser le sujet",description:"Voulez-vous archiver cet article ou le supprimer définitivement ?","confirm-label":"Supprimer définitivement",type:"danger",loading:s(a),"show-archive":"",onCancel:c,onConfirm:j,onConfirmArchive:_},null,8,["is-open","loading"])]))}}),ae=F(W,[["__scopeId","data-v-53eb61bf"]]);export{ae as default};
