import{_ as b}from"./kYN9ZUdP.js";import{_ as g,c as l,a as e,p as t,b as y,w,l as x,m as u,v as p,t as V,r as f,o as n,d as k,s as m}from"./C_A17Xze.js";const C={class:"setup-container"},N={class:"setup-card glass-panel"},h={key:0,class:"success-message"},q={class:"form-grid"},U={class:"form-group"},B={class:"form-group"},D={class:"form-group"},S={class:"form-group"},M={key:0,class:"error-message"},P=["disabled"],T={key:0},E={key:1},I={key:2,class:"help-text"},z={__name:"setup",setup(A){const o=m({email:"",password:"",first_name:"",last_name:""}),r=m(!1),i=m(null),c=m(!1),_=async()=>{try{r.value=!0,i.value=null,(await $fetch("/api/auth/setup-admin",{method:"POST",body:o.value})).success&&(c.value=!0)}catch(d){i.value=d.data?.statusMessage||d.message||"Une erreur est survenue"}finally{r.value=!1}};return(d,s)=>{const v=b;return n(),l("div",C,[e("div",N,[s[12]||(s[12]=e("div",{class:"logo"},[e("h1",{class:"brand"},"DigiBlog"),e("p",{class:"subtitle"},"Initialisation de l'administrateur")],-1)),t(c)?(n(),l("div",h,[s[5]||(s[5]=e("div",{class:"success-icon"},"✅",-1)),s[6]||(s[6]=e("h2",null,"Compte créé !",-1)),s[7]||(s[7]=e("p",null,"Votre compte administrateur est prêt. Vous pouvez maintenant vous connecter.",-1)),y(v,{to:"/login",class:"btn btn-primary full-width"},{default:w(()=>[...s[4]||(s[4]=[k("Aller à la connexion",-1)])]),_:1})])):(n(),l("form",{key:1,onSubmit:x(_,["prevent"]),class:"setup-form"},[e("div",q,[e("div",U,[s[8]||(s[8]=e("label",null,"Prénom",-1)),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t(o).first_name=a),placeholder:"Jean",required:""},null,512),[[p,t(o).first_name]])]),e("div",B,[s[9]||(s[9]=e("label",null,"Nom",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>t(o).last_name=a),placeholder:"Dupont",required:""},null,512),[[p,t(o).last_name]])])]),e("div",D,[s[10]||(s[10]=e("label",null,"Email address",-1)),u(e("input",{type:"email","onUpdate:modelValue":s[2]||(s[2]=a=>t(o).email=a),placeholder:"admin@example.com",required:""},null,512),[[p,t(o).email]])]),e("div",S,[s[11]||(s[11]=e("label",null,"Password",-1)),u(e("input",{type:"password","onUpdate:modelValue":s[3]||(s[3]=a=>t(o).password=a),placeholder:"••••••••",required:""},null,512),[[p,t(o).password]])]),t(i)?(n(),l("div",M,V(t(i)),1)):f("",!0),e("button",{type:"submit",class:"btn btn-primary full-width",disabled:t(r)},[t(r)?(n(),l("span",T,"Création en cours...")):(n(),l("span",E,"Créer le compte admin"))],8,P)],32)),t(c)?f("",!0):(n(),l("p",I," Cette page n'est accessible que si aucun utilisateur n'existe dans la base de données. "))])])}}},O=g(z,[["__scopeId","data-v-5a9de630"]]);export{O as default};
