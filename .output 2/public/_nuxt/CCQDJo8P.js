import{u as k}from"./pLjy45M9.js";import{L as C}from"./CG3JdVlk.js";import{A}from"./BdB3I3wt.js";import{C as S}from"./Ckzw1s2j.js";import{x as D,y as B,o as s,c as l,a as e,p as i,z as m,d as L,t as V,F as T,A as M,w as N,b as R,s as c,_ as z}from"./C_A17Xze.js";import"./BJCqP2a2.js";import"./CXg0sqL6.js";import"./pMK9VmZY.js";import"./Cl4ISXQJ.js";const F={class:"dashboard-page"},I={key:1,class:"error-msg"},$={key:2,class:"table-card-container"},j={class:"articles-table"},E=["onClick"],G=["onClick"],H=D({__name:"archive",setup(O){const{articles:v,fetch:h,loading:f,error:u,deleteArticle:g,updateStatus:b}=k({statuses:["abandoned","error"]}),y=async n=>{await b(n,"validated")},d=c(!1),o=c(null),a=c(!1),w=n=>{o.value=n,d.value=!0},p=()=>{d.value=!1,o.value=null,a.value=!1},x=async()=>{if(!o.value)return;a.value=!0,await g(o.value)?p():a.value=!1};return B(()=>{h()}),(n,t)=>(s(),l("div",F,[t[4]||(t[4]=e("div",{class:"page-header"},[e("div",{class:"header-text"},[e("h1",null,"Archive"),e("p",{class:"subtitle"},"Gestion des articles refusés : nettoyage et récupération.")])],-1)),i(f)?(s(),m(C,{key:0,message:"Chargement des articles..."})):i(u)?(s(),l("div",I,[t[0]||(t[0]=e("div",{class:"error-icon"},"⚠️",-1)),L(" "+V(i(u)),1)])):(s(),l("div",$,[e("table",j,[t[3]||(t[3]=e("thead",null,[e("tr",null,[e("th",{style:{width:"40%"}},"Titre"),e("th",{style:{width:"30%"}},"Description"),e("th",{style:{width:"40px","text-align":"center"}},"URL"),e("th",{style:{width:"90px"}},"Date"),e("th",{style:{width:"120px"}},"Statut"),e("th",{style:{width:"140px","text-align":"right"}},"Actions")])],-1)),e("tbody",null,[(s(!0),l(T,null,M(i(v),r=>(s(),m(A,{key:r.id,article:r,"show-status":""},{actions:N(()=>[e("button",{class:"btn btn-ghost btn-sm btn-icon-only",onClick:_=>y(r.id),title:"Restaurer l'article (remettre en validé)"},[...t[1]||(t[1]=[e("span",{style:{"font-size":"16px"}},"♻️",-1)])],8,E),e("button",{class:"btn btn-ghost btn-sm btn-icon-only text-danger",onClick:_=>w(r.id),title:"Supprimer définitivement"},[...t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1)])],8,G)]),_:2},1032,["article"]))),128))])])])),R(S,{"is-open":i(d),title:"Supprimer définitivement",description:"Êtes-vous sûr de vouloir supprimer définitivement cet article ? Cette action est irréversible.","confirm-label":"Supprimer définitivement",type:"danger",loading:i(a),onCancel:p,onConfirm:x},null,8,["is-open","loading"])]))}}),Z=z(H,[["__scopeId","data-v-57d2de56"]]);export{Z as default};
